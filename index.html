<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>MaliApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg,#6a11cb,#2575fc);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      color:#333;
    }
    .box {
      background:#fff;
      padding:25px;
      width:320px;
      border-radius:15px;
      box-shadow:0 10px 30px rgba(0,0,0,.3);
      text-align:center;
    }
    input {
      width:100%;
      padding:10px;
      margin:8px 0;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:16px;
    }
    button {
      width:100%;
      padding:10px;
      margin-top:10px;
      border:none;
      border-radius:8px;
      background:#2575fc;
      color:white;
      font-size:16px;
      cursor:pointer;
    }
    button:hover { background:#6a11cb; }
    .hidden { display:none; }
  </style>
</head>

<body>

<div class="box" id="authBox">
  <h2>MaliApp</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
</div>

<div class="box hidden" id="appBox">
  <h2>ðŸŽ‰ Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ</h2>
  <p>ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­</p>
  <p id="userEmail"></p>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<script>
  // ðŸ”¥ Firebase config (Ù…ØªØ§Ø¹Ùƒ)
  const firebaseConfig = {
    apiKey: "AIzaSyBfMUa-8vsUZ_1r5F79iSKOKqMre99lwbI",
    authDomain: "maliapp-63f91.firebaseapp.com",
    projectId: "maliapp-63f91",
    storageBucket: "maliapp-63f91.firebasestorage.app",
    messagingSenderId: "901870433172",
    appId: "1:901870433172:web:325b2312af72099279d581"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨
  function register() {
    const email = email.value;
    const password = password.value;

    auth.createUserWithEmailAndPassword(email, password)
      .then(() => alert("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨"))
      .catch(err => alert(err.message));
  }

  // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  function login() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    auth.signInWithEmailAndPassword(email, password)
      .catch(err => alert(err.message));
  }

  // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
  function logout() {
    auth.signOut();
  }

  // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  auth.onAuthStateChanged(user => {
    if (user) {
      authBox.classList.add("hidden");
      appBox.classList.remove("hidden");
      userEmail.innerText = "ðŸ“§ " + user.email;
    } else {
      authBox.classList.remove("hidden");
      appBox.classList.add("hidden");
    }
  });
</script>

</body>
</html>
